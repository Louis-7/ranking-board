(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1047:function(e,t,s){Promise.resolve().then(s.bind(s,6069))},6069:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var a=s(7437),n=s(2265),l=s(9666),r=s(4042),i=s(1507),o=s(779);let c=e=>(0,a.jsx)(o.Z,{...e}),d=e=>{let{rankingRecords:t}=e,s={xAxis:{data:t.map(e=>e.receiver)},yAxis:{},series:[{type:"bar",data:t.map(e=>e.points)}]};return(0,a.jsx)(c,{option:s,opts:{renderer:"svg"}})};var h=s(9222);class x{async loadEvents(){return h.Z.get(this.dataUrl).then(e=>{this.data=e.data})}getRankingRecords(){if(!this.isLoaded())return[];let e=this.data.ranking,t={};for(let s of e){let e=s.receiver,a=s.points;if(null!=t[e]){let s=t[e];t[e]=s+a}else t[e]=a}let s=[];for(let e in t)s.push({receiver:e,points:t[e]});return s}isLoaded(){return null!=this.data}getTotalEvents(){return this.isLoaded()?this.data.ranking.length:0}getTotalUsers(){if(!this.isLoaded())return 0;let e=this.data.ranking,t={};for(let s of e)null!=t[s.receiver]?t[s.receiver]++:t[s.receiver]=1,null!=t[s.sender]?t[s.sender]++:t[s.sender]=1;return Object.keys(t).length}getTotalPoints(){if(!this.isLoaded())return 0;let e=this.data.ranking;return e.reduce((e,t)=>e+t.points,0)}constructor(){this.dataUrl="https://raw.githubusercontent.com/Louis-7/ranking-board/main/data/ranking.json",this.data={ranking:[]}}}function u(){let[e,t]=(0,n.useState)([]),[s,o]=(0,n.useState)({totalEvents:0,totalUsers:0,totalPoints:0});return(0,n.useEffect)(()=>{let e=new x;return e.loadEvents().then(()=>{t(e.getRankingRecords()),o({totalEvents:e.getTotalEvents(),totalUsers:e.getTotalUsers(),totalPoints:e.getTotalPoints()})}),()=>{}},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex justify-center gap-x-6",children:[(0,a.jsxs)(l.w,{className:"w-60",children:[(0,a.jsxs)(r.u,{className:"pb-0 pt-2 px-4 flex-col items-start",children:[(0,a.jsx)("p",{className:"text-tiny uppercase font-bold",children:"Total"}),(0,a.jsx)("h4",{className:"font-bold text-large",children:"Events"})]}),(0,a.jsx)(i.G,{className:"overflow-visible py-2",children:(0,a.jsx)("h4",{className:"font-bold text-4xl",children:s.totalEvents})})]}),(0,a.jsxs)(l.w,{className:"w-60",children:[(0,a.jsxs)(r.u,{className:"pb-0 pt-2 px-4 flex-col items-start",children:[(0,a.jsx)("p",{className:"text-tiny uppercase font-bold",children:"Total"}),(0,a.jsx)("h4",{className:"font-bold text-large",children:"User"})]}),(0,a.jsx)(i.G,{className:"overflow-visible py-2",children:(0,a.jsx)("h4",{className:"font-bold text-4xl",children:s.totalUsers})})]}),(0,a.jsxs)(l.w,{className:"w-60",children:[(0,a.jsxs)(r.u,{className:"pb-0 pt-2 px-4 flex-col items-start",children:[(0,a.jsx)("p",{className:"text-tiny uppercase font-bold",children:"Total"}),(0,a.jsx)("h4",{className:"font-bold text-large",children:"Points"})]}),(0,a.jsx)(i.G,{className:"overflow-visible py-2",children:(0,a.jsx)("h4",{className:"font-bold text-4xl",children:s.totalPoints})})]})]}),(0,a.jsx)("div",{className:"md:container",children:e.length>0?(0,a.jsx)(d,{rankingRecords:e}):(0,a.jsx)("div",{children:"loading..."})})]})}}},function(e){e.O(0,[539,95,971,596,744],function(){return e(e.s=1047)}),_N_E=e.O()}]);